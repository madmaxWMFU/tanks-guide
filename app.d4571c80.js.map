{"version":3,"sources":["js/utils.js","js/app.js"],"names":["parameters","application_id","getStringParams","params","Object","entries","map","param","key","join","romeNumber","filterByCategory","list","category","filterByTier","getUrl","path","getRomeNumber","num","renderApp","document","querySelector","innerHTML","App","loadData","url","response","fetch","data","json","performSearch","cache","window","dataStore","status","process","then","error","catch","finally","searchByFilter","vehicle","cacheType","dataset","type","value","split","filters","searchById","id","searchData","classList","add","is_premium","tier","nation","images","big_icon","short_name","name","price_credit","description","default_profile","hp","max_ammo","speed_forward","speed_backward","weight","getVehicleList","values","tank_id","getVehicleTypes","generalData","vehicle_types","vehicleTypes","keys","toLocaleLowerCase","getVehicleNations","vehicle_nations","nationList","module","hot","accept","activeFilters","init","language","vehicleData","vehicle_compare"],"mappings":"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","file":"app.d4571c80.js","sourceRoot":"..","sourcesContent":["const parameters = {\n  //   application_id: process.env.WOT_API_ID_KEY,\n  application_id: '42a820be7f4b3fa53490a3eebeae0521',\n};\n\nconst getStringParams = params => {\n  return Object.entries(params)\n    .map((param, key) => {\n      return `${param.join('=')}&`;\n    })\n    .join('');\n};\n\nconst romeNumber = {\n  1: 'I',\n  2: 'II',\n  3: 'III',\n  4: 'IV',\n  5: 'V',\n  6: 'VI',\n  7: 'VII',\n  8: 'VIII',\n  9: 'IX',\n  10: 'X',\n};\n\nexport const filterByCategory = (list, category) => {};\n\nexport const filterByTier = list => {};\n\nexport const getUrl = (path, param = {}) => {\n  let params = { ...parameters, ...param };\n  getStringParams(params);\n  return `https://api.worldoftanks.ru/wot/encyclopedia/${path}/?${getStringParams(params)}`;\n};\n\nexport const getRomeNumber = num => {\n  return romeNumber[num];\n};\n","import { getUrl, getRomeNumber, addActiveFilter, filterByTier } from './utils';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStore = {\n  activeFilters: {},\n  status: {\n    error: null,\n    process: null,\n  },\n  init: {\n    cache: 'generalData',\n    path: 'info',\n    param: {\n      language: 'ru',\n    },\n  },\n  cache: {\n    generalData: null,\n    searchData: null,\n    vehicleData: null,\n  },\n  filters: {},\n  vehicle_compare: [],\n};\n\nwindow.renderApp = renderApp;\nwindow.loadData = loadData;\nwindow.performSearch = performSearch;\nwindow.searchByFilter = searchByFilter;\nwindow.searchById = searchById;\n\nperformSearch(window.dataStore.init.cache, window.dataStore.init.path, window.dataStore.init.param);\nrenderApp();\n\nfunction renderApp() {\n  document.querySelector('#app-root').innerHTML = `\n      ${App()}\n  `;\n}\n\nasync function loadData(path, param) {\n  const url = getUrl(path, param);\n  const response = await fetch(url);\n  const data = await response.json();\n  return data;\n}\n\nfunction performSearch(cache, path, param) {\n  window.dataStore.status.process = 'in load';\n  window\n    .loadData(path, param)\n    .then(({ error, data }) => {\n      if (error) {\n        window.dataStore.status.error = 'error';\n      } else if (data) {\n        window.dataStore.cache[cache] = data;\n      }\n    })\n    .catch(() => {\n      window.dataStore.status.error = 'Some error occurred.';\n    })\n    .finally(window.renderApp);\n}\n\nfunction searchByFilter(vehicle) {\n  const cacheType = vehicle.dataset.type;\n  const [key, value] = vehicle.dataset.value.split('_');\n  window.dataStore.filters[key] = value;\n  window.performSearch(cacheType, 'vehicles', window.dataStore.filters);\n  addActiveFilter(vehicle);\n}\n\nfunction searchById(id) {\n  if (id) {\n    const vehicle = window.dataStore.cache.searchData[id];\n    document.querySelector('.modal').classList.add('modal--active');\n    document.querySelector('.modal').innerHTML = `     <div class=\"modal-body\">\n        <div>\n          <button onclick=\"document.querySelector('.modal').classList.remove('modal--active');\"></button>\n        </div>\n        <div class=\"modal-wrap\">\n          <div class=\"vehicle-item\">\n            <span \n              class=\"vehicle-type ${\n                vehicle.is_premium ? `type-${vehicle.type}--premium` : `type-${vehicle.type}`\n              }\"\n            >\n              ${getRomeNumber(vehicle.tier)}\n            </span>\n            <span \n              class=\"vehicle-flag vehicle-flag-${vehicle.nation}\"\n            ></span>\n            <img \n              class=\"vehicle-img\"\n              src=\"${vehicle.images.big_icon}\"\n              alt=\"${vehicle.short_name}\"\n            > \n          </div>\n          <div>\n            <p class=\"vehicle-prop\">\n              <b class=\"vehicle-name\">${vehicle.name}</b> - \n              <b class=\"vehicle-price\">${vehicle.price_credit}</b>\n            </p>\n            <p class=\"vehicle-prop vehicle-description\">${vehicle.description}</p>\n          </div>\n        </div>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-hp_title\">Прочность: </span><b class=\"vehicle-hp\">${\n            vehicle.default_profile.hp\n          }</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-max_ammo_title\">Боекомплект: </span><b class=\"vehicle-max_ammo\">${\n            vehicle.default_profile.max_ammo\n          }</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-_title\"> :</span><b class=\"vehicle-\">${\n            vehicle.default_profile.max_ammo\n          }</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-speed_forward_title\">Максимальная скорость (км/ч) :</span><b class=\"vehicle-speed_forward\">${\n            vehicle.default_profile.speed_forward\n          }</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-speed_backward_title\">Макс. скорость заднего хода (км/ч) :</span><b class=\"vehicle-speed_backward\">${\n            vehicle.default_profile.speed_backward\n          }</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-weight_title\">Масса (кг):</span><b class=\"vehicle-weight\">${\n            vehicle.default_profile.weight\n          }</b>\n        </p>\n      </div>\n    `;\n  } else {\n    return '';\n  }\n}\n\nfunction getVehicleList() {\n  const data = window.dataStore.cache.searchData;\n  if (data) {\n    return Object.values(data)\n      .map(vehicle => {\n        return `\n          <div \n            class=\"vehicle-item\"\n            data-type=\"vehicleData\"\n            data-id=\"${vehicle.tank_id}\"\n            onclick=\"(window.searchById)(this.dataset.id)\"\n          > \n            <span \n              class=\"vehicle-type ${\n                vehicle.is_premium ? `type-${vehicle.type}--premium` : `type-${vehicle.type}`\n              }\"\n            >\n              ${getRomeNumber(vehicle.tier)}\n            </span>\n            <span \n              class=\"vehicle-flag vehicle-flag-${vehicle.nation}\"\n            ></span>\n            <img \n              class=\"vehicle-img\"\n              src=\"${vehicle.images.big_icon}\"\n              alt=\"${vehicle.short_name}\"\n            /> \n            <span \n              class=\"vehicle-title ${vehicle.is_premium ? 'vehicle-title--premium' : ''}\"\n            >\n              ${vehicle.short_name}\n            </span>\n          </div>`;\n      })\n      .join('');\n  } else {\n    return ``;\n  }\n}\n\nfunction getVehicleTypes() {\n  if (window.dataStore.cache.generalData) {\n    const { vehicle_types: vehicleTypes } = window.dataStore.cache.generalData;\n\n    return `\n      <ul class=\"nation-list\">\n          ${Object.keys(vehicleTypes)\n            .map(type => {\n              return `\n                <li \n                  class=\"type-item\"\n                  data-type=\"searchData\"\n                  data-value=\"type_${type}\"\n                  onclick=\"(window.searchByFilter)(this);\"\n                >\n                  <img \n                    class=\"type-img\"\n                    src=\"./images/types/${type.toLocaleLowerCase()}.png\"\n                    alt=\"${vehicleTypes[type]}\">\n                  <span>\n                    ${vehicleTypes[type]}\n                  </span>\n                </li>`;\n            })\n            .join('')}\n      </ul>`;\n  } else {\n    return '';\n  }\n}\n\nfunction getVehicleNations() {\n  if (window.dataStore.cache.generalData) {\n    const { vehicle_nations: nationList } = window.dataStore.cache.generalData;\n\n    return `\n      <ul class=\"nation-list\">\n          ${Object.keys(nationList)\n            .map(nation => {\n              return `\n                <li \n                  class=\"nation-item\"\n                  data-type=\"searchData\"\n                  data-value=\"nation_${nation}\"\n                  onclick=\"(window.searchByFilter)(this);\"\n                >\n                  <img \n                    class=\"nation-img\"\n                    src=\"./images/flags/${nation}.png\"\n                    alt=\"${nationList[nation]}\"\n                  >\n                  <span>\n                    ${nationList[nation]}\n                  </span>\n                </li>`;\n            })\n            .join('')}\n      </ul>`;\n  } else {\n    return '';\n  }\n}\n\nfunction App() {\n  return `\n    <div class=\"nation-wrap\">\n        <h2 class=\"nation-title\">Нация</h2>\n        ${getVehicleNations()}\n    </div>\n    <div class=\"type-wrap\">\n        <h2 class=\"type-title\">Вид</h2>\n        ${getVehicleTypes()}\n    </div>\n    <div class=\"vehicle-wrap\">\n        ${getVehicleList()}\n    </div>\n    <div class=\"infoVehicle-wrap modal \">\n    </div>\n    `;\n}\n"]}