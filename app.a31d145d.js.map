{"version":3,"sources":["js/utils.js","js/app.js"],"names":["parameters","application_id","getStringParams","params","Object","entries","map","param","key","join","romeNumber","getUrl","path","getRomeNumber","num","renderApp","document","querySelector","innerHTML","App","loadData","url","fetch","then","response","json","data","performSearch","cache","window","dataStore","status","process","error","catch","finally","searchByFilter","vehicle","cacheType","type","value","split","filters","alert","searchById","id","searchData","classList","add","is_premium","tier","nation","images","big_icon","short_name","name","price_credit","description","default_profile","hp","max_ammo","speed_forward","speed_backward","weight","getVehicleList","values","tank_id","getVehicleTypes","generalData","vehicle_types","vehicleTypes","keys","toLocaleLowerCase","getVehicleNations","vehicle_nations","nationList","module","hot","accept","init","language","vehicleData","vehicle_compare"],"mappings":";AAgCO,aAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,KAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,OAAA,SAAA,GAAA,OAAA,OAAA,yBAAA,EAAA,GAAA,cAAA,EAAA,KAAA,MAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,MAAA,UAAA,GAAA,UAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,IAAA,GAAA,QAAA,SAAA,GAAA,EAAA,EAAA,EAAA,EAAA,MAAA,OAAA,0BAAA,OAAA,iBAAA,EAAA,OAAA,0BAAA,IAAA,EAAA,OAAA,IAAA,QAAA,SAAA,GAAA,OAAA,eAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,cAAA,QAAA,YAAA,EAhCP,MAAMA,EAAa,CAEjBC,eAAgB,oCAGZC,EAAkBC,GACfC,OAAOC,QAAQF,GACnBG,IAAI,CAACC,EAAOC,OACDD,EAAME,KAAK,SAEtBA,KAAK,IAGJC,EAAa,CACZ,EAAA,IACA,EAAA,KACA,EAAA,MACA,EAAA,KACA,EAAA,IACA,EAAA,KACA,EAAA,MACA,EAAA,OACA,EAAA,KACC,GAAA,KAGKC,EAAS,CAACC,EAAML,EAAQ,MAC/BJ,IAAAA,EAAcH,EAAAA,EAAAA,GAAAA,GAAeO,GAEzB,OADRL,EAAgBC,mDACuCS,MAASV,EAAgBC,MAG3E,QAAA,OAAA,EAAA,MAAMU,EAAgBC,GACpBJ,EAAWI,GADb,QAAA,cAAA;;AC4NN,aA5PD,IAAA,EAAA,QAAA,WAoCA,SAASC,IACPC,SAASC,cAAc,aAAaC,uBAC5BC,YAIV,SAASC,EAASR,EAAML,GAChBc,MAAAA,GAAM,EAAOT,EAAAA,QAAAA,EAAML,GAClBe,OAAAA,MAAMD,GACVE,KAAKC,GAAYA,EAASC,QAC1BF,KAAKG,GAAQA,GAGlB,SAASC,EAAcC,EAAOhB,EAAML,GAClCsB,OAAOC,UAAUC,OAAOC,QAAU,UAClCH,OACGT,SAASR,EAAML,GACfgB,KAAK,EAAGU,MAAAA,EAAOP,KAAAA,MACVO,EACFJ,OAAOC,UAAUC,OAAOE,MAAQ,QACvBP,IACTG,OAAOC,UAAUF,MAAMA,GAASF,KAGnCQ,MAAM,KACLL,OAAOC,UAAUC,OAAOE,MAAQ,yBAEjCE,QAAQN,OAAOd,WAGpB,SAASqB,EAAeC,GAChBC,MAAAA,EAAYD,EAAQE,MACnB/B,EAAKgC,GAASH,EAAQG,MAAMC,MAAM,KACzCZ,OAAOC,UAAUY,QAAQlC,GAAOgC,EAChCX,OAAOF,cAAcW,EAAW,WAAYT,OAAOC,UAAUY,SAC7DC,MAAO,MAGT,SAASC,EAAWC,GACfA,IAAAA,EAsDM,MAAA,GAtDF,CACCR,MAAAA,EAAUR,OAAOC,UAAUF,MAAMkB,WAAWD,GAClD7B,SAASC,cAAc,UAAU8B,UAAUC,IAAI,iBAC/ChC,SAASC,cAAc,UAAUC,oTAQrBmB,EAAQY,mBAAqBZ,EAAQE,wBAA0BF,EAAQE,0CAGvE,EAAcF,EAAAA,eAAAA,EAAQa,kGAGWb,EAAQc,2GAIpCd,EAAQe,OAAOC,iCACfhB,EAAQiB,+IAKWjB,EAAQkB,uDACPlB,EAAQmB,+FAESnB,EAAQoB,yKAIiBpB,EAAQqB,gBAAgBC,0JAGVtB,EAAQqB,gBAAgBE,qIAGnDvB,EAAQqB,gBAAgBE,2LAG8BvB,EAAQqB,gBAAgBG,wMAGhBxB,EAAQqB,gBAAgBI,gKAGjEzB,EAAQqB,gBAAgBK,gDASnH,SAASC,IACDtC,MAAAA,EAAOG,OAAOC,UAAUF,MAAMkB,WAChCpB,OAAAA,EACKtB,OAAO6D,OAAOvC,GAClBpB,IAAI+B,qHAKYA,EAAQ6B,6IAKf7B,EAAQY,mBAAqBZ,EAAQE,wBAA0BF,EAAQE,0CAGvE,EAAcF,EAAAA,eAAAA,EAAQa,kGAGWb,EAAQc,2GAIpCd,EAAQe,OAAOC,iCACfhB,EAAQiB,wFAGQjB,EAAQY,WAAa,yBAA2B,qCAErEZ,EAAQiB,qDAIjB7C,KAAK,IAEA,GAIZ,SAAS0D,IACHtC,GAAAA,OAAOC,UAAUF,MAAMwC,YAAa,CAChC,MAAEC,cAAeC,GAAiBzC,OAAOC,UAAUF,MAAMwC,YAEvD,qDAEAhE,OAAOmE,KAAKD,GACXhE,IAAIiC,gJAKoBA,qMAKKA,EAAKiC,sDACpBF,EAAa/B,uDAElB+B,EAAa/B,wDAItB9B,KAAK,mBAGP,MAAA,GAIX,SAASgE,IACH5C,GAAAA,OAAOC,UAAUF,MAAMwC,YAAa,CAChC,MAAEM,gBAAiBC,GAAe9C,OAAOC,UAAUF,MAAMwC,YAEvD,qDAEAhE,OAAOmE,KAAKI,GACXrE,IAAI6C,oJAKsBA,uMAKGA,oCACfwB,EAAWxB,2EAGhBwB,EAAWxB,wDAIpB1C,KAAK,mBAGP,MAAA,GAIX,SAASU,IACC,+FAGAsD,kGAIAN,4DAGAH,+EArPNY,OAAOC,KACTD,OAAOC,IAAIC,SAGbjD,OAAOC,UAAY,CACjBC,OAAQ,CACNE,MAAO,KACPD,QAAS,MAEX+C,KAAM,CACJnD,MAAO,cACPhB,KAAM,OACNL,MAAO,CACLyE,SAAU,OAGdpD,MAAO,CACLwC,YAAa,KACbtB,WAAY,KACZmC,YAAa,MAEfvC,QAAS,GACTwC,gBAAiB,IAGnBrD,OAAOd,UAAYA,EACnBc,OAAOT,SAAWA,EAClBS,OAAOF,cAAgBA,EACvBE,OAAOO,eAAiBA,EACxBP,OAAOe,WAAaA,EAEpBjB,EAAcE,OAAOC,UAAUiD,KAAKnD,MAAOC,OAAOC,UAAUiD,KAAKnE,KAAMiB,OAAOC,UAAUiD,KAAKxE,OAC7FQ","file":"app.a31d145d.js","sourceRoot":"..","sourcesContent":["const parameters = {\n  //   application_id: process.env.WOT_API_ID_KEY,\n  application_id: '42a820be7f4b3fa53490a3eebeae0521',\n};\n\nconst getStringParams = params => {\n  return Object.entries(params)\n    .map((param, key) => {\n      return `${param.join('=')}&`;\n    })\n    .join('');\n};\n\nconst romeNumber = {\n  '1': \"I\",\n  '2': \"II\",\n  '3': \"III\",\n  '4': \"IV\",\n  '5': \"V\",\n  '6': \"VI\",\n  '7': \"VII\",\n  '8': \"VIII\",\n  '9': \"IX\",\n  '10': \"X\",\n};\n\nexport const getUrl = (path, param = {}) => {\n  let params = { ...parameters, ...param };\n  getStringParams(params);\n  return `https://api.worldoftanks.ru/wot/encyclopedia/${path}/?${getStringParams(params)}`;\n};\n\nexport const getRomeNumber = num => {\n  return romeNumber[num];\n};\n","import { getUrl, getRomeNumber } from './utils';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStore = {\n  status: {\n    error: null,\n    process: null,\n  },\n  init: {\n    cache: 'generalData',\n    path: 'info',\n    param: {\n      language: 'ru',\n    },\n  },\n  cache: {\n    generalData: null,\n    searchData: null,\n    vehicleData: null,\n  },\n  filters: {},\n  vehicle_compare: [],\n};\n\nwindow.renderApp = renderApp;\nwindow.loadData = loadData;\nwindow.performSearch = performSearch;\nwindow.searchByFilter = searchByFilter;\nwindow.searchById = searchById;\n\nperformSearch(window.dataStore.init.cache, window.dataStore.init.path, window.dataStore.init.param);\nrenderApp();\n\nfunction renderApp() {\n  document.querySelector('#app-root').innerHTML = `\n        ${App()}\n    `;\n}\n\nfunction loadData(path, param) {\n  const url = getUrl(path, param);\n  return fetch(url)\n    .then(response => response.json())\n    .then(data => data);\n}\n\nfunction performSearch(cache, path, param) {\n  window.dataStore.status.process = \"in load\";\n  window\n    .loadData(path, param)\n    .then(({ error, data }) => {\n      if (error) {\n        window.dataStore.status.error = \"error\";\n      } else if (data) {\n        window.dataStore.cache[cache] = data;\n      }\n    })\n    .catch(() => {\n      window.dataStore.status.error = \"Some error occurred.\";\n    })\n    .finally(window.renderApp);\n}\n\nfunction searchByFilter(vehicle) {\n  const cacheType = vehicle.type;\n  const [key, value] = vehicle.value.split('-');\n  window.dataStore.filters[key] = value;\n  window.performSearch(cacheType, 'vehicles', window.dataStore.filters);\n  alert(`ok`);\n}\n\nfunction searchById(id) {\n  if(id) {\n    const vehicle = window.dataStore.cache.searchData[id];\n    document.querySelector('.modal').classList.add('modal--active');\n    document.querySelector('.modal').innerHTML = `     <div class=\"modal-body\">\n        <div>\n          <button onclick=\"document.querySelector('.modal').classList.remove('modal--active');\"></button>\n        </div>\n        <div class=\"modal-wrap\">\n          <div class=\"vehicle-item\">\n            <span \n              class=\"vehicle-type ${\n                vehicle.is_premium ? `type-${vehicle.type}--premium` : `type-${vehicle.type}`\n              }\"\n            >\n              ${getRomeNumber(vehicle.tier)}\n            </span>\n            <span \n              class=\"vehicle-flag vehicle-flag-${vehicle.nation}\"\n            ></span>\n            <img \n              class=\"vehicle-img\"\n              src=\"${vehicle.images.big_icon}\"\n              alt=\"${vehicle.short_name}\"\n            > \n          </div>\n          <div>\n            <p class=\"vehicle-prop\">\n              <b class=\"vehicle-name\">${vehicle.name}</b> - \n              <b class=\"vehicle-price\">${vehicle.price_credit}</b>\n            </p>\n            <p class=\"vehicle-prop vehicle-description\">${vehicle.description}</p>\n          </div>\n        </div>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-hp_title\">Прочность: </span><b class=\"vehicle-hp\">${vehicle.default_profile.hp}</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-max_ammo_title\">Боекомплект: </span><b class=\"vehicle-max_ammo\">${vehicle.default_profile.max_ammo}</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-_title\"> :</span><b class=\"vehicle-\">${vehicle.default_profile.max_ammo}</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-speed_forward_title\">Максимальная скорость (км/ч) :</span><b class=\"vehicle-speed_forward\">${vehicle.default_profile.speed_forward}</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-speed_backward_title\">Макс. скорость заднего хода (км/ч) :</span><b class=\"vehicle-speed_backward\">${vehicle.default_profile.speed_backward}</b>\n        </p>\n        <p class=\"vehicle-prop\">\n          <span class=\"vehicle-weight_title\">Масса (кг):</span><b class=\"vehicle-weight\">${vehicle.default_profile.weight}</b>\n        </p>\n      </div>\n    `;\n  } else {\n    return '';\n  }\n}\n\nfunction getVehicleList() {\n  const data = window.dataStore.cache.searchData;\n  if (data) {\n    return Object.values(data)\n      .map(vehicle => {\n        return `\n          <div \n            class=\"vehicle-item\"\n            data-type=\"vehicleData\"\n            data-id=\"${vehicle.tank_id}\"\n            onclick=\"(window.searchById)(this.dataset.id)\"\n          > \n            <span \n              class=\"vehicle-type ${\n                vehicle.is_premium ? `type-${vehicle.type}--premium` : `type-${vehicle.type}`\n              }\"\n            >\n              ${getRomeNumber(vehicle.tier)}\n            </span>\n            <span \n              class=\"vehicle-flag vehicle-flag-${vehicle.nation}\"\n            ></span>\n            <img \n              class=\"vehicle-img\"\n              src=\"${vehicle.images.big_icon}\"\n              alt=\"${vehicle.short_name}\"\n            /> \n            <span \n              class=\"vehicle-title ${vehicle.is_premium ? 'vehicle-title--premium' : ''}\"\n            >\n              ${vehicle.short_name}\n            </span>\n          </div>`;\n      })\n      .join('');\n  } else {\n    return ``;\n  }\n}\n\nfunction getVehicleTypes() {\n  if (window.dataStore.cache.generalData) {\n    const { vehicle_types: vehicleTypes } = window.dataStore.cache.generalData;\n\n    return `\n      <ul class=\"nation-list\">\n          ${Object.keys(vehicleTypes)\n            .map(type => {\n              return `\n                <li \n                  class=\"type-item\"\n                  data-type=\"searchData\"\n                  data-value=\"type-${type}\"\n                  onclick=\"(window.searchByFilter)(this.dataset);\"\n                >\n                  <img \n                    class=\"type-img\"\n                    src=\"./images/types/${type.toLocaleLowerCase()}.png\"\n                    alt=\"${vehicleTypes[type]}\">\n                  <span>\n                    ${vehicleTypes[type]}\n                  </span>\n                </li>`;\n            })\n            .join('')}\n      </ul>`;\n  } else {\n    return '';\n  }\n}\n\nfunction getVehicleNations() {\n  if (window.dataStore.cache.generalData) {\n    const { vehicle_nations: nationList } = window.dataStore.cache.generalData;\n\n    return `\n      <ul class=\"nation-list\">\n          ${Object.keys(nationList)\n            .map(nation => {\n              return `\n                <li \n                  class=\"nation-item\"\n                  data-type=\"searchData\"\n                  data-value=\"nation-${nation}\"\n                  onclick=\"(window.searchByFilter)(this.dataset);\"\n                >\n                  <img \n                    class=\"nation-img\"\n                    src=\"./images/flags/${nation}.png\"\n                    alt=\"${nationList[nation]}\"\n                  >\n                  <span>\n                    ${nationList[nation]}\n                  </span>\n                </li>`;\n            })\n            .join('')}\n      </ul>`;\n  } else {\n    return '';\n  }\n}\n\nfunction App() {\n  return `\n    <div class=\"nation-wrap\">\n        <h2 class=\"nation-title\">Нация</h2>\n        ${getVehicleNations()}\n    </div>\n    <div class=\"type-wrap\">\n        <h2 class=\"type-title\">Вид</h2>\n        ${getVehicleTypes()}\n    </div>\n    <div class=\"vehicle-wrap\">\n        ${getVehicleList()}\n    </div>\n    <div class=\"infoVehicle-wrap modal \">\n    </div>\n    `;\n}\n"]}