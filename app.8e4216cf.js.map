{"version":3,"sources":["js/utils.js","js/app.js"],"names":["parameters","application_id","getStringParams","params","Object","entries","map","param","key","join","romeNumber","filterByCategory","list","category","filterByTier","getUrl","path","getRomeNumber","num","renderApp","document","querySelector","innerHTML","App","loadData","url","response","fetch","data","json","performSearch","cache","window","dataStore","status","process","then","error","catch","finally","searchByFilter","vehicle","cacheType","dataset","type","value","split","filters","searchById","id","searchData","classList","add","is_premium","tier","nation","images","big_icon","short_name","name","price_credit","price_gold","description","default_profile","hp","values","armor","hull","weight","ammo","item","damage","penetration","gun","fire_rate","aim_time","dispersion","max_ammo","crew","member","roles","turret","view_range","radio","signal_range","speed_forward","speed_backward","tank_id","getVehicleList","getVehicleTypes","generalData","vehicle_types","vehicleTypes","keys","toLocaleLowerCase","getVehicleNations","vehicle_nations","nationList","module","hot","accept","init","language","vehicleData","vehicle_compare","user_compare"],"mappings":"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","file":"app.8e4216cf.js","sourceRoot":"..","sourcesContent":["const parameters = {\n  //   application_id: process.env.WOT_API_ID_KEY,\n  application_id: '42a820be7f4b3fa53490a3eebeae0521',\n};\n\nconst getStringParams = params => {\n  return Object.entries(params)\n    .map((param, key) => {\n      return `${param.join('=')}&`;\n    })\n    .join('');\n};\n\nconst romeNumber = {\n  1: 'I',\n  2: 'II',\n  3: 'III',\n  4: 'IV',\n  5: 'V',\n  6: 'VI',\n  7: 'VII',\n  8: 'VIII',\n  9: 'IX',\n  10: 'X',\n};\n\nexport const filterByCategory = (list, category) => {};\n\nexport const filterByTier = list => {};\n\nexport const getUrl = (path, param = {}) => {\n  let params = { ...parameters, ...param };\n  getStringParams(params);\n  return `https://api.worldoftanks.ru/wot/encyclopedia/${path}/?${getStringParams(params)}`;\n};\n\nexport const getRomeNumber = num => {\n  return romeNumber[num];\n};\n","import { getUrl, getRomeNumber } from './utils';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStore = {\n  status: {\n    error: null,\n    process: null,\n  },\n  init: {\n    cache: 'generalData',\n    path: 'info',\n    param: {\n      language: 'ru',\n    },\n  },\n  cache: {\n    generalData: null,\n    searchData: null,\n    vehicleData: null,\n  },\n  filters: {},\n  vehicle_compare: [],\n  user_compare: [],\n};\n\nwindow.renderApp = renderApp;\nwindow.loadData = loadData;\nwindow.performSearch = performSearch;\nwindow.searchByFilter = searchByFilter;\nwindow.searchById = searchById;\n\nperformSearch(window.dataStore.init.cache, window.dataStore.init.path, window.dataStore.init.param);\nrenderApp();\n\nfunction renderApp() {\n  document.querySelector('#app-root').innerHTML = `\n      ${App()}\n  `;\n}\n\nasync function loadData(path, param) {\n  const url = getUrl(path, param);\n  const response = await fetch(url);\n  const data = await response.json();\n  return data;\n}\n\nfunction performSearch(cache, path, param) {\n  window.dataStore.status.process = 'in load';\n  window\n    .loadData(path, param)\n    .then(({ error, data }) => {\n      if (error) {\n        window.dataStore.status.error = 'error';\n      } else if (data) {\n        window.dataStore.cache[cache] = data;\n      }\n    })\n    .catch(() => {\n      window.dataStore.status.error = 'Some error occurred.';\n    })\n    .finally(window.renderApp);\n}\n\nfunction searchByFilter(vehicle) {\n  const cacheType = vehicle.dataset.type;\n  const [key, value] = vehicle.dataset.value.split('_');\n  window.dataStore.filters[key] = value;\n  window.performSearch(cacheType, 'vehicles', window.dataStore.filters);\n}\n\nfunction searchById(id) {\n  if (id) {\n    const vehicle = window.dataStore.cache.searchData[id];\n    document.querySelector('.modal').classList.add('modal--active');\n    document.querySelector('.modal').innerHTML = `     \n      <div class=\"modal-body\">\n        <div class=\"modal-header\">\n          <button class=\"modal-header_btn\" onclick=\"document.querySelector('.modal').classList.remove('modal--active');\">x</button>\n        </div>\n        <div class=\"modal-wrap\">\n          <div class=\"vehicle-item\">\n            <span \n              class=\"vehicle-type \n                  ${vehicle.is_premium ? `type-${vehicle.type}--premium` : `type-${vehicle.type}`}\"\n            >\n              ${getRomeNumber(vehicle.tier)}\n            </span>\n            <span \n              class=\"vehicle-flag vehicle-flag-${vehicle.nation}\"\n            ></span>\n            <img \n              class=\"vehicle-img\"\n              src=\"${vehicle.images.big_icon}\"\n              alt=\"${vehicle.short_name}\"\n            > \n          </div>\n          <div>\n            <p class=\"modal-wrap_title vehicle-prop\">\n              <b class=\"vehicle-name\">${vehicle.name}</b> - \n              <b class=\"vehicle-price\">\n                ${vehicle.price_credit ? vehicle.price_credit : vehicle.price_gold}\n              </b>\n            </p>\n            <p class=\"vehicle-prop vehicle-description\">${vehicle.description}</p>\n          </div>\n        </div>\n        <div class=\"modal-content\">\n          <div>\n            <h2>Живучесть</h2>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-hp_title\">Прочность: </span>\n              <b class=\"vehicle-hp\">\n                ${vehicle.default_profile.hp}\n              </b>\n            </p>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-hull_title\">Бронирование корпуса (мм): </span>\n              <b class=\"vehicle-hull\">\n                ${Object.values(vehicle.default_profile.armor.hull).join(' / ')}\n              </b>\n            </p>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-weight_title\">Масса (кг):</span>\n              <b class=\"vehicle-weight\">\n                ${vehicle.default_profile.weight}\n              </b>\n            </p>\n          </div>\n          <div>\n            <h2>Огневая мощь</h2>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-damage_title\">Урон: </span>\n              <b class=\"vehicle-damage\">\n                ${vehicle.default_profile.ammo\n                  .map(item => {\n                    return item.damage[1];\n                  })\n                  .join(' / ')}\n              </b>\n            </p>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-penetration_title\">Бронепробитие: </span>\n              <b class=\"vehicle-penetration\">\n                ${vehicle.default_profile.ammo\n                  .map(item => {\n                    return item.penetration[1];\n                  })\n                  .join(' / ')}\n              </b>\n            </p>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-fire_rate_title\">Скорострельность (выстр/мин): </span>\n              <b class=\"vehicle-fire_rate\">\n                ${vehicle.default_profile.gun.fire_rate}\n              </b>\n            </p>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-aim_time_title\">Время сведения (с): </span>\n              <b class=\"vehicle-aim_time\">\n                ${vehicle.default_profile.gun.aim_time}\n              </b>\n            </p>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-dispersion_title\">Разброс на 100 м (м): </span>\n              <b class=\"vehicle-dispersion\">\n                ${vehicle.default_profile.gun.dispersion}\n              </b>\n            </p>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-max_ammo_title\">Боекомплект: </span>\n              <b class=\"vehicle-max_ammo\">\n                ${vehicle.default_profile.max_ammo}\n              </b>\n            </p>\n          </div>\n          <div>\n            <h2 class=\"vehicle-crew_title\">Экипаж</h2>\n            <p class=\"vehicle-prop vehicle-crew\">\n              ${vehicle.crew\n                .map((member, key) => {\n                  return `${++key}. ${Object.values(member.roles).join('-')}`;\n                })\n                .join('<br>')}\n            </p>\n          </div>\n          <div>\n            <h2 class=\"vehicle-crew_title\">Наблюдение</h2>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-speed_forward_title\">Обзор (м) :</span>\n              <b class=\"vehicle-speed_forward\">\n                ${vehicle.default_profile.turret.view_range}\n              </b>\n            </p>        \n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-speed_forward_title\">Дальность связи (м) :</span>\n              <b class=\"vehicle-speed_forward\">\n                ${vehicle.default_profile.radio.signal_range}\n              </b>\n            </p>\n          </div>\n          <div>\n            <h2>Передвижение</h2>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-speed_forward_title\">Максимальная скорость (км/ч) :</span>\n              <b class=\"vehicle-speed_forward\">\n                ${vehicle.default_profile.speed_forward}\n              </b>\n            </p>\n            <p class=\"vehicle-prop\">\n              <span class=\"vehicle-speed_backward_title\">Макс. скорость заднего хода (км/ч) :</span>\n              <b class=\"vehicle-speed_backward\">\n                ${vehicle.default_profile.speed_backward}\n              </b>\n            </p>\n          </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"modal-footer_btn\" onclick=\"window.dataStore.vehicle_compare.push(${\n              vehicle.tank_id\n            });\">Добавить для сравнения</button>\n          </div>\n      </div>\n    `;\n  } else {\n    return '';\n  }\n}\n\nfunction getVehicleList() {\n  const data = window.dataStore.cache.searchData;\n  if (data) {\n    return Object.values(data)\n      .map(vehicle => {\n        return `\n          <div \n            class=\"vehicle-item\"\n            data-type=\"vehicleData\"\n            data-id=\"${vehicle.tank_id}\"\n            onclick=\"(window.searchById)(this.dataset.id)\"\n          > \n            <span \n              class=\"vehicle-type ${\n                vehicle.is_premium ? `type-${vehicle.type}--premium` : `type-${vehicle.type}`\n              }\"\n            >\n              ${getRomeNumber(vehicle.tier)}\n            </span>\n            <span \n              class=\"vehicle-flag vehicle-flag-${vehicle.nation}\"\n            ></span>\n            <img \n              class=\"vehicle-img\"\n              src=\"${vehicle.images.big_icon}\"\n              alt=\"${vehicle.short_name}\"\n            /> \n            <span \n              class=\"vehicle-title ${vehicle.is_premium ? 'vehicle-title--premium' : ''}\"\n            >\n              ${vehicle.short_name}\n            </span>\n          </div>`;\n      })\n      .join('');\n  } else {\n    return ``;\n  }\n}\n\nfunction getVehicleTypes() {\n  if (window.dataStore.cache.generalData) {\n    const { vehicle_types: vehicleTypes } = window.dataStore.cache.generalData;\n\n    return `\n      <ul class=\"nation-list\">\n          ${Object.keys(vehicleTypes)\n            .map(type => {\n              return `\n                <li \n                  class=\"type-item\"\n                  data-type=\"searchData\"\n                  data-value=\"type_${type}\"\n                  onclick=\"(window.searchByFilter)(this);\"\n                >\n                  <img \n                    class=\"type-img\"\n                    src=\"./images/types/${type.toLocaleLowerCase()}.png\"\n                    alt=\"${vehicleTypes[type]}\">\n                  <span>\n                    ${vehicleTypes[type]}\n                  </span>\n                </li>`;\n            })\n            .join('')}\n      </ul>`;\n  } else {\n    return '';\n  }\n}\n\nfunction getVehicleNations() {\n  if (window.dataStore.cache.generalData) {\n    const { vehicle_nations: nationList } = window.dataStore.cache.generalData;\n\n    return `\n      <ul class=\"nation-list\">\n          ${Object.keys(nationList)\n            .map(nation => {\n              return `\n                <li \n                  class=\"nation-item\"\n                  data-type=\"searchData\"\n                  data-value=\"nation_${nation}\"\n                  onclick=\"(window.searchByFilter)(this);\"\n                >\n                  <img \n                    class=\"nation-img\"\n                    src=\"./images/flags/${nation}.png\"\n                    alt=\"${nationList[nation]}\"\n                  >\n                  <span>\n                    ${nationList[nation]}\n                  </span>\n                </li>`;\n            })\n            .join('')}\n      </ul>`;\n  } else {\n    return '';\n  }\n}\n\nfunction App() {\n  return `\n    <div class=\"nation-wrap\">\n        <h2 class=\"nation-title\">Нация</h2>\n        ${getVehicleNations()}\n    </div>\n    <div class=\"type-wrap\">\n        <h2 class=\"type-title\">Вид</h2>\n        ${getVehicleTypes()}\n    </div>\n    <div class=\"vehicle-wrap\">\n        ${getVehicleList()}\n    </div>\n    <div class=\"modal\">\n    </div>\n    `;\n}\n"]}